import{d as F,e as f,f as re}from"./index-CIpMSW_s.js";import{V as v}from"./VBtn-B-hdhH-1.js";import{V as p,b as V,a as S,c as $}from"./VCard-BaakkVFD.js";import{V as w}from"./VTextField-BhM9EnZB.js";import{V as q}from"./VSelect-DqaGkUWA.js";import{V as j}from"./VDataTable-BJfS9fh-.js";import{f as y,g as J,h as Q}from"./VAvatar-C-ER2-0S.js";import{V as G}from"./VChip-pvFqXEpf.js";import{V as z}from"./VDialog-BeAbm4-J.js";import{V as X}from"./VForm-D0rJnxSg.js";import{V as H}from"./VCheckbox-BrkgBynp.js";import{V as R}from"./VSpacer-CKNG9Jdn.js";import{d,c as ne,x as me,K,L as O,M as t,m as l,O as i,S as u,T as r,V as Y}from"./vue-vendor-B4qzxTjV.js";import{V as ve,a as E,b as U,c as fe}from"./VList-zMJOwsiP.js";import{V as pe}from"./VDivider-Drx-iRHJ.js";import{V as Ve,a as Z,b as ge,c}from"./VTabs-Cq3JusBa.js";import"./vuetify-vendor-BD37EBPT.js";import"./VField-BmVeynRq.js";import"./index-yNQZhi3p.js";import"./VInput-Bp3p24Ap.js";import"./forwardRefs-C-GTDzx5.js";import"./VMenu-BWniRe4g.js";import"./VOverlay-BXO8EOEs.js";import"./lazy-UP9naqc7.js";import"./dialog-transition-MjUo7Nu_.js";import"./VCheckboxBtn-CvAPjEFh.js";import"./VSelectionControl-b5nrjLPm.js";import"./VTable-4JWyy6tp.js";const ye={class:"text-caption"},we={class:"text-caption"},xe={class:"text-h4"},Ce={class:"mt-4"},be={class:"text-h4"},Ae={class:"text-h4"},ke={class:"text-h4"},he={__name:"index",setup(Le){const B=d(!1),x=d(""),I=d(null),C=d(null),M=d(["Поддержка клиентов","Техническая поддержка","Продажи","Консультанты"]),h=d([{title:"",key:"avatar",width:"60px"},{title:"ФИО",key:"name"},{title:"Email",key:"email"},{title:"Группа",key:"group"},{title:"Статус",key:"status",width:"100px"},{title:"Уровень стресса",key:"stressLevel",width:"150px"},{title:"Действия",key:"actions",width:"120px",sortable:!1}]),g=d([{id:1,name:"Иванов Иван Иванович",email:"ivanov@example.com",group:"Поддержка клиентов",isActive:!0,isAdmin:!1,stressLevel:45,createdAt:new Date("2023-01-15"),stats:{totalChats:156,averageRating:4.8,resolvedIssues:142},tests:[{id:1,name:"Тест на знание продукта",date:new Date("2023-09-10"),score:"92/100",result:"Пройден"},{id:2,name:"Тест на стрессоустойчивость",date:new Date("2023-08-15"),score:"87/100",result:"Пройден"}]},{id:2,name:"Петрова Мария Сергеевна",email:"petrova@example.com",group:"Техническая поддержка",isActive:!0,isAdmin:!0,stressLevel:32,createdAt:new Date("2023-02-20"),stats:{totalChats:203,averageRating:4.9,resolvedIssues:198},tests:[{id:1,name:"Тест на знание продукта",date:new Date("2023-09-05"),score:"95/100",result:"Пройден"},{id:2,name:"Тест на стрессоустойчивость",date:new Date("2023-08-10"),score:"90/100",result:"Пройден"}]},{id:3,name:"Сидоров Алексей Петрович",email:"sidorov@example.com",group:"Продажи",isActive:!1,isAdmin:!1,stressLevel:78,createdAt:new Date("2023-03-05"),stats:{totalChats:98,averageRating:4.2,resolvedIssues:85},tests:[{id:1,name:"Тест на знание продукта",date:new Date("2023-09-01"),score:"82/100",result:"Пройден"},{id:2,name:"Тест на стрессоустойчивость",date:new Date("2023-08-05"),score:"75/100",result:"Пройден условно"}]}]),ee=ne(()=>g.value.filter(s=>{const e=!x.value||s.name.toLowerCase().includes(x.value.toLowerCase())||s.email.toLowerCase().includes(x.value.toLowerCase()),a=!I.value||s.group===I.value,T=!C.value||C.value==="Активен"&&s.isActive||C.value==="Неактивен"&&!s.isActive;return e&&a&&T})),b=d(!1),A=d(!1),k=d(!1),L=d(!1),N=d(!1),W=d(!1),m=d({name:"",email:"",password:"",group:"",isAdmin:!1}),n=d({}),o=d(null),D=d("stats"),le=d([{title:"Название теста",key:"name"},{title:"Дата",key:"date"},{title:"Результат",key:"result"},{title:"Оценка",key:"score"}]);function te(){m.value={name:"",email:"",password:"",group:"",isAdmin:!1},b.value=!0}function ae(){const s=Math.max(...g.value.map(e=>e.id))+1;g.value.push({id:s,...m.value,isActive:!0,stressLevel:0,createdAt:new Date,stats:{totalChats:0,averageRating:0,resolvedIssues:0},tests:[]}),b.value=!1,alert("Сотрудник успешно добавлен")}function P(s){n.value={...s},k.value=!1,A.value=!0}function ue(){const s=g.value.findIndex(e=>e.id===n.value.id);s!==-1&&(g.value[s]={...g.value[s],...n.value}),A.value=!1,alert("Информация о сотруднике обновлена")}function se(s){o.value=s,k.value=!0,D.value="stats"}function oe(s){o.value=s,L.value=!0}function de(){const s=g.value.findIndex(e=>e.id===o.value.id);s!==-1&&g.value.splice(s,1),L.value=!1,alert("Сотрудник успешно удален")}function ie(s){return s?new Date(s).toLocaleDateString():""}function _(s){return s<30?"success":s<70?"warning":"error"}return me(async()=>{B.value=!0,setTimeout(()=>{B.value=!1},1e3)}),(s,e)=>(O(),K(re,null,{default:t(()=>[l(F,{class:"mb-4"},{default:t(()=>[l(f,null,{default:t(()=>e[26]||(e[26]=[i("h1",{class:"text-h4"},"Управление сотрудниками",-1)])),_:1}),l(f,{cols:"auto"},{default:t(()=>[l(v,{color:"primary","prepend-icon":"mdi-account-plus",onClick:te},{default:t(()=>e[27]||(e[27]=[u(" Добавить сотрудника ")])),_:1})]),_:1})]),_:1}),l(p,null,{default:t(()=>[l(V,null,{default:t(()=>[l(F,null,{default:t(()=>[l(f,{cols:"12",md:"4"},{default:t(()=>[l(w,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),label:"Поиск","prepend-inner-icon":"mdi-magnify","single-line":"","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),l(f,{cols:"12",md:"4"},{default:t(()=>[l(q,{modelValue:I.value,"onUpdate:modelValue":e[1]||(e[1]=a=>I.value=a),items:M.value,label:"Фильтр по группе","prepend-inner-icon":"mdi-filter",clearable:"","hide-details":""},null,8,["modelValue","items"])]),_:1}),l(f,{cols:"12",md:"4"},{default:t(()=>[l(q,{modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=a=>C.value=a),items:["Активен","Неактивен"],label:"Фильтр по статусу","prepend-inner-icon":"mdi-filter",clearable:"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(j,{headers:h.value,items:ee.value,"items-per-page":10,loading:B.value,class:"elevation-1"},{"item.avatar":t(({item:a})=>[l(Q,{color:"grey lighten-1",size:"36"},{default:t(()=>[i("span",ye,r(a.raw.name.charAt(0)),1)]),_:2},1024)]),"item.status":t(({item:a})=>[l(G,{color:a.raw.isActive?"success":"error",size:"small"},{default:t(()=>[u(r(a.raw.isActive?"Активен":"Неактивен"),1)]),_:2},1032,["color"])]),"item.stressLevel":t(({item:a})=>[l(J,{"model-value":a.raw.stressLevel,color:_(a.raw.stressLevel),height:"10",rounded:""},null,8,["model-value","color"]),i("span",we,r(a.raw.stressLevel)+"%",1)]),"item.actions":t(({item:a})=>[l(v,{icon:"",variant:"text",size:"small",onClick:T=>se(a.raw)},{default:t(()=>[l(y,null,{default:t(()=>e[28]||(e[28]=[u("mdi-eye")])),_:1})]),_:2},1032,["onClick"]),l(v,{icon:"",variant:"text",size:"small",onClick:T=>P(a.raw)},{default:t(()=>[l(y,null,{default:t(()=>e[29]||(e[29]=[u("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),l(v,{icon:"",variant:"text",size:"small",color:"error",onClick:T=>oe(a.raw)},{default:t(()=>[l(y,null,{default:t(()=>e[30]||(e[30]=[u("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["headers","items","loading"])]),_:1}),l(z,{modelValue:b.value,"onUpdate:modelValue":e[10]||(e[10]=a=>b.value=a),"max-width":"600"},{default:t(()=>[l(p,null,{default:t(()=>[l(S,null,{default:t(()=>e[31]||(e[31]=[u("Добавить сотрудника")])),_:1}),l(V,null,{default:t(()=>[l(X,{ref:"addForm",modelValue:N.value,"onUpdate:modelValue":e[8]||(e[8]=a=>N.value=a)},{default:t(()=>[l(w,{modelValue:m.value.name,"onUpdate:modelValue":e[3]||(e[3]=a=>m.value.name=a),label:"ФИО",required:"",rules:[a=>!!a||"ФИО обязательно"]},null,8,["modelValue","rules"]),l(w,{modelValue:m.value.email,"onUpdate:modelValue":e[4]||(e[4]=a=>m.value.email=a),label:"Email",type:"email",required:"",rules:[a=>!!a||"Email обязателен",a=>/.+@.+\..+/.test(a)||"Email должен быть действительным"]},null,8,["modelValue","rules"]),l(w,{modelValue:m.value.password,"onUpdate:modelValue":e[5]||(e[5]=a=>m.value.password=a),label:"Пароль",type:"password",required:"",rules:[a=>!!a||"Пароль обязателен",a=>a.length>=8||"Пароль должен быть не менее 8 символов"]},null,8,["modelValue","rules"]),l(q,{modelValue:m.value.group,"onUpdate:modelValue":e[6]||(e[6]=a=>m.value.group=a),items:M.value,label:"Группа",required:"",rules:[a=>!!a||"Группа обязательна"]},null,8,["modelValue","items","rules"]),l(H,{modelValue:m.value.isAdmin,"onUpdate:modelValue":e[7]||(e[7]=a=>m.value.isAdmin=a),label:"Администратор"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l($,null,{default:t(()=>[l(R),l(v,{color:"secondary",onClick:e[9]||(e[9]=a=>b.value=!1)},{default:t(()=>e[32]||(e[32]=[u("Отмена")])),_:1}),l(v,{color:"primary",onClick:ae,disabled:!N.value},{default:t(()=>e[33]||(e[33]=[u("Добавить")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(z,{modelValue:A.value,"onUpdate:modelValue":e[18]||(e[18]=a=>A.value=a),"max-width":"600"},{default:t(()=>[l(p,null,{default:t(()=>[l(S,null,{default:t(()=>e[34]||(e[34]=[u("Редактировать сотрудника")])),_:1}),l(V,null,{default:t(()=>[l(X,{ref:"editForm",modelValue:W.value,"onUpdate:modelValue":e[16]||(e[16]=a=>W.value=a)},{default:t(()=>[l(w,{modelValue:n.value.name,"onUpdate:modelValue":e[11]||(e[11]=a=>n.value.name=a),label:"ФИО",required:"",rules:[a=>!!a||"ФИО обязательно"]},null,8,["modelValue","rules"]),l(w,{modelValue:n.value.email,"onUpdate:modelValue":e[12]||(e[12]=a=>n.value.email=a),label:"Email",type:"email",required:"",rules:[a=>!!a||"Email обязателен",a=>/.+@.+\..+/.test(a)||"Email должен быть действительным"]},null,8,["modelValue","rules"]),l(q,{modelValue:n.value.group,"onUpdate:modelValue":e[13]||(e[13]=a=>n.value.group=a),items:M.value,label:"Группа",required:"",rules:[a=>!!a||"Группа обязательна"]},null,8,["modelValue","items","rules"]),l(H,{modelValue:n.value.isAdmin,"onUpdate:modelValue":e[14]||(e[14]=a=>n.value.isAdmin=a),label:"Администратор"},null,8,["modelValue"]),l(H,{modelValue:n.value.isActive,"onUpdate:modelValue":e[15]||(e[15]=a=>n.value.isActive=a),label:"Активен"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),l($,null,{default:t(()=>[l(R),l(v,{color:"secondary",onClick:e[17]||(e[17]=a=>A.value=!1)},{default:t(()=>e[35]||(e[35]=[u("Отмена")])),_:1}),l(v,{color:"primary",onClick:ue,disabled:!W.value},{default:t(()=>e[36]||(e[36]=[u("Сохранить")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(z,{modelValue:k.value,"onUpdate:modelValue":e[23]||(e[23]=a=>k.value=a),"max-width":"800"},{default:t(()=>[l(p,null,{default:t(()=>[l(S,null,{default:t(()=>e[37]||(e[37]=[u("Информация о сотруднике")])),_:1}),o.value?(O(),K(V,{key:0},{default:t(()=>[l(F,null,{default:t(()=>[l(f,{cols:"12",md:"4",class:"text-center"},{default:t(()=>[l(Q,{color:"grey lighten-1",size:"100"},{default:t(()=>[i("span",xe,r(o.value.name.charAt(0)),1)]),_:1}),i("div",Ce,[l(G,{color:o.value.isActive?"success":"error",class:"mt-2"},{default:t(()=>[u(r(o.value.isActive?"Активен":"Неактивен"),1)]),_:1},8,["color"]),o.value.isAdmin?(O(),K(G,{key:0,color:"primary",class:"mt-2 ml-2"},{default:t(()=>e[38]||(e[38]=[u(" Администратор ")])),_:1})):Y("",!0)])]),_:1}),l(f,{cols:"12",md:"8"},{default:t(()=>[l(ve,null,{default:t(()=>[l(E,null,{prepend:t(()=>[l(y,{color:"primary"},{default:t(()=>e[39]||(e[39]=[u("mdi-account")])),_:1})]),default:t(()=>[l(U,null,{default:t(()=>[u(r(o.value.name),1)]),_:1})]),_:1}),l(E,null,{prepend:t(()=>[l(y,{color:"primary"},{default:t(()=>e[40]||(e[40]=[u("mdi-email")])),_:1})]),default:t(()=>[l(U,null,{default:t(()=>[u(r(o.value.email),1)]),_:1})]),_:1}),l(E,null,{prepend:t(()=>[l(y,{color:"primary"},{default:t(()=>e[41]||(e[41]=[u("mdi-account-group")])),_:1})]),default:t(()=>[l(U,null,{default:t(()=>[u(r(o.value.group),1)]),_:1})]),_:1}),l(E,null,{prepend:t(()=>[l(y,{color:"primary"},{default:t(()=>e[42]||(e[42]=[u("mdi-calendar")])),_:1})]),default:t(()=>[l(U,null,{default:t(()=>[u("Дата регистрации: "+r(ie(o.value.createdAt)),1)]),_:1})]),_:1}),l(E,null,{prepend:t(()=>[l(y,{color:_(o.value.stressLevel)},{default:t(()=>e[43]||(e[43]=[u("mdi-emoticon")])),_:1},8,["color"])]),default:t(()=>[l(U,null,{default:t(()=>e[44]||(e[44]=[u("Уровень стресса:")])),_:1}),l(fe,null,{default:t(()=>[l(J,{"model-value":o.value.stressLevel,color:_(o.value.stressLevel),height:"20",striped:"",class:"mt-2"},{default:t(({value:a})=>[i("strong",null,r(Math.ceil(a))+"%",1)]),_:1},8,["model-value","color"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(pe,{class:"my-4"}),l(Ve,{modelValue:D.value,"onUpdate:modelValue":e[19]||(e[19]=a=>D.value=a)},{default:t(()=>[l(Z,{value:"stats"},{default:t(()=>e[45]||(e[45]=[u("Статистика")])),_:1}),l(Z,{value:"tests"},{default:t(()=>e[46]||(e[46]=[u("Тесты")])),_:1})]),_:1},8,["modelValue"]),l(ge,{modelValue:D.value,"onUpdate:modelValue":e[20]||(e[20]=a=>D.value=a)},{default:t(()=>[l(c,{value:"stats"},{default:t(()=>[l(p,{flat:""},{default:t(()=>[l(V,null,{default:t(()=>[e[50]||(e[50]=i("h3",{class:"text-h6 mb-2"},"Статистика работы",-1)),l(F,null,{default:t(()=>[l(f,{cols:"12",md:"4"},{default:t(()=>[l(p,{outlined:""},{default:t(()=>[l(V,{class:"text-center"},{default:t(()=>[i("div",be,r(o.value.stats.totalChats),1),e[47]||(e[47]=i("div",{class:"text-caption"},"Всего чатов",-1))]),_:1})]),_:1})]),_:1}),l(f,{cols:"12",md:"4"},{default:t(()=>[l(p,{outlined:""},{default:t(()=>[l(V,{class:"text-center"},{default:t(()=>[i("div",Ae,r(o.value.stats.averageRating.toFixed(1)),1),e[48]||(e[48]=i("div",{class:"text-caption"},"Средняя оценка",-1))]),_:1})]),_:1})]),_:1}),l(f,{cols:"12",md:"4"},{default:t(()=>[l(p,{outlined:""},{default:t(()=>[l(V,{class:"text-center"},{default:t(()=>[i("div",ke,r(o.value.stats.resolvedIssues),1),e[49]||(e[49]=i("div",{class:"text-caption"},"Решенных проблем",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(c,{value:"tests"},{default:t(()=>[l(p,{flat:""},{default:t(()=>[l(V,null,{default:t(()=>[e[51]||(e[51]=i("h3",{class:"text-h6 mb-2"},"Результаты тестов",-1)),l(j,{headers:le.value,items:o.value.tests,"items-per-page":5},null,8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):Y("",!0),l($,null,{default:t(()=>[l(R),l(v,{color:"primary",onClick:e[21]||(e[21]=a=>k.value=!1)},{default:t(()=>e[52]||(e[52]=[u("Закрыть")])),_:1}),l(v,{color:"secondary",onClick:e[22]||(e[22]=a=>P(o.value))},{default:t(()=>e[53]||(e[53]=[u("Редактировать")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(z,{modelValue:L.value,"onUpdate:modelValue":e[25]||(e[25]=a=>L.value=a),"max-width":"400"},{default:t(()=>[l(p,null,{default:t(()=>[l(S,null,{default:t(()=>e[54]||(e[54]=[u("Подтверждение удаления")])),_:1}),l(V,null,{default:t(()=>{var a;return[u(" Вы действительно хотите удалить сотрудника "+r((a=o.value)==null?void 0:a.name)+"? ",1)]}),_:1}),l($,null,{default:t(()=>[l(R),l(v,{color:"secondary",onClick:e[24]||(e[24]=a=>L.value=!1)},{default:t(()=>e[55]||(e[55]=[u("Отмена")])),_:1}),l(v,{color:"error",onClick:de},{default:t(()=>e[56]||(e[56]=[u("Удалить")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{he as default};
