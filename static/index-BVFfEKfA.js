import{d as Z,e as E,f as xe}from"./index-CIpMSW_s.js";import{V as d}from"./VBtn-B-hdhH-1.js";import{V as z,b as D,a as O,c as Q,d as be}from"./VCard-BaakkVFD.js";import{V as x}from"./VTextField-BhM9EnZB.js";import{V as K}from"./VSelect-DqaGkUWA.js";import{V as ye}from"./VDataTable-BJfS9fh-.js";import{f as y}from"./VAvatar-C-ER2-0S.js";import{V as W}from"./VChip-pvFqXEpf.js";import{V as B}from"./VDialog-BeAbm4-J.js";import{V as I}from"./VForm-D0rJnxSg.js";import{V as M}from"./VCheckbox-BrkgBynp.js";import{V as G}from"./VDivider-Drx-iRHJ.js";import{V as C}from"./VSpacer-CKNG9Jdn.js";import{V as ge,a as ke,b as Ce}from"./VList-zMJOwsiP.js";import{d as p,c as H,x as Ue,K as _,L as V,M as o,m as t,O as m,S as s,T as v,R as b,F as U,U as w,W as we}from"./vue-vendor-B4qzxTjV.js";import"./vuetify-vendor-BD37EBPT.js";import"./VField-BmVeynRq.js";import"./index-yNQZhi3p.js";import"./VInput-Bp3p24Ap.js";import"./forwardRefs-C-GTDzx5.js";import"./VMenu-BWniRe4g.js";import"./VOverlay-BXO8EOEs.js";import"./lazy-UP9naqc7.js";import"./dialog-transition-MjUo7Nu_.js";import"./VCheckboxBtn-CvAPjEFh.js";import"./VSelectionControl-b5nrjLPm.js";import"./VTable-4JWyy6tp.js";const qe={class:"d-flex align-center mb-2"},Le={class:"text-subtitle-1"},Te={class:"d-flex align-center mb-2"},Ae={class:"text-subtitle-1"},$e={class:"mb-4"},ze={class:"d-flex justify-space-between mb-4"},De={class:"text-h6 mb-2"},Fe={class:"text-body-1 mb-4"},ul={__name:"index",setup(Se){const N=p(!1),q=p(""),F=p(null),J=p(["Профессиональные навыки","Психологический","Коммуникация","Технический"]),h=p([{title:"ID",key:"id",width:"80px"},{title:"Название теста",key:"title"},{title:"Категория",key:"category"},{title:"Вопросы",key:"questions",width:"120px"},{title:"Время",key:"timeLimit",width:"100px"},{title:"Статус",key:"status",width:"120px"},{title:"Действия",key:"actions",width:"120px",sortable:!1}]),k=p([{id:1,title:"Тест на знание продукта",description:"Проверка знаний о продуктах и услугах компании",category:"Профессиональные навыки",isActive:!0,timeLimit:30,questions:[{text:"Какой основной продукт компании?",options:[{text:"Программное обеспечение",correct:!0},{text:"Аппаратные средства",correct:!1},{text:"Консультационные услуги",correct:!1},{text:"Облачные сервисы",correct:!1}]},{text:"Какой срок гарантии на продукты компании?",options:[{text:"1 год",correct:!1},{text:"2 года",correct:!0},{text:"3 года",correct:!1},{text:"Без гарантии",correct:!1}]},{text:"Какой канал поддержки клиентов наиболее предпочтителен?",options:[{text:"Телефон",correct:!1},{text:"Электронная почта",correct:!1},{text:"Онлайн-чат",correct:!0},{text:"Социальные сети",correct:!1}]}]},{id:2,title:"Тест на стрессоустойчивость",description:"Оценка уровня стрессоустойчивости и эмоционального интеллекта",category:"Психологический",isActive:!0,timeLimit:20,questions:[{text:"Как вы обычно реагируете на внезапные изменения в работе?",options:[{text:"Легко адаптируюсь",correct:!0},{text:"Испытываю некоторый дискомфорт, но справляюсь",correct:!1},{text:"Сильно переживаю и долго привыкаю",correct:!1},{text:"Активно сопротивляюсь изменениям",correct:!1}]},{text:"Как вы справляетесь с конфликтными ситуациями на работе?",options:[{text:"Избегаю конфликтов любой ценой",correct:!1},{text:"Стараюсь найти компромисс",correct:!0},{text:"Отстаиваю свою позицию до конца",correct:!1},{text:"Обращаюсь к руководству для решения",correct:!1}]}]},{id:3,title:"Тест на коммуникативные навыки",description:"Оценка навыков общения с клиентами",category:"Коммуникация",isActive:!1,timeLimit:25,questions:[{text:"Клиент агрессивно высказывает претензии. Ваши действия?",options:[{text:"Отвечу в той же манере",correct:!1},{text:"Сохраню спокойствие и внимательно выслушаю",correct:!0},{text:"Передам разговор другому сотруднику",correct:!1},{text:"Попрошу клиента успокоиться",correct:!1}]},{text:"Как лучше начать разговор с новым клиентом?",options:[{text:"Представиться и узнать имя клиента",correct:!0},{text:"Сразу перейти к делу",correct:!1},{text:"Начать с шутки",correct:!1},{text:"Спросить о личных интересах",correct:!1}]}]}]),ee=H(()=>k.value.filter(a=>{const e=!q.value||a.title.toLowerCase().includes(q.value.toLowerCase())||a.description.toLowerCase().includes(q.value.toLowerCase()),l=!F.value||a.category===F.value;return e&&l})),L=p(!1),T=p(!1),A=p(!1),$=p(!1),R=p(!1),j=p(!1),le=H(()=>{if(!n.value.questions.length)return!1;for(const a of n.value.questions)if(!a.text||a.options.length<2||!a.options.some(e=>e.correct)||a.options.some(e=>!e.text))return!1;return!0}),te=H(()=>{var a;if(!((a=r.value.questions)!=null&&a.length))return!1;for(const e of r.value.questions)if(!e.text||e.options.length<2||!e.options.some(l=>l.correct)||e.options.some(l=>!l.text))return!1;return!0}),n=p({title:"",description:"",category:"",isActive:!0,timeLimit:30,questions:[]}),r=p({}),c=p(null);function oe(){n.value={title:"",description:"",category:"",isActive:!0,timeLimit:30,questions:[]},P(),L.value=!0}function P(){n.value.questions.push({text:"",options:[{text:"",correct:!1},{text:"",correct:!1}]})}function ae(a){n.value.questions.splice(a,1)}function se(a){n.value.questions[a].options.push({text:"",correct:!1})}function ie(a,e){n.value.questions[a].options.splice(e,1)}function ue(){const a=Math.max(...k.value.map(e=>e.id))+1;k.value.push({id:a,...n.value}),L.value=!1,alert("Тест успешно создан")}function X(a){r.value=JSON.parse(JSON.stringify(a)),A.value=!1,T.value=!0}function re(){r.value.questions.push({text:"",options:[{text:"",correct:!1},{text:"",correct:!1}]})}function de(a){r.value.questions.splice(a,1)}function ne(a){r.value.questions[a].options.push({text:"",correct:!1})}function me(a,e){r.value.questions[a].options.splice(e,1)}function fe(){const a=k.value.findIndex(e=>e.id===r.value.id);a!==-1&&(k.value[a]=r.value),T.value=!1,alert("Тест успешно обновлен")}function pe(a){c.value=a,A.value=!0}function ve(a){c.value=a,$.value=!0}function ce(){const a=k.value.findIndex(e=>e.id===c.value.id);a!==-1&&k.value.splice(a,1),$.value=!1,alert("Тест успешно удален")}return Ue(async()=>{N.value=!0,setTimeout(()=>{N.value=!1},1e3)}),(a,e)=>(V(),_(xe,null,{default:o(()=>[t(Z,{class:"mb-4"},{default:o(()=>[t(E,null,{default:o(()=>e[23]||(e[23]=[m("h1",{class:"text-h4"},"Управление тестами",-1)])),_:1}),t(E,{cols:"auto"},{default:o(()=>[t(d,{color:"primary","prepend-icon":"mdi-plus",onClick:oe},{default:o(()=>e[24]||(e[24]=[s(" Создать тест ")])),_:1})]),_:1})]),_:1}),t(z,null,{default:o(()=>[t(D,null,{default:o(()=>[t(Z,null,{default:o(()=>[t(E,{cols:"12",md:"6"},{default:o(()=>[t(x,{modelValue:q.value,"onUpdate:modelValue":e[0]||(e[0]=l=>q.value=l),label:"Поиск","prepend-inner-icon":"mdi-magnify","single-line":"","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),t(E,{cols:"12",md:"6"},{default:o(()=>[t(K,{modelValue:F.value,"onUpdate:modelValue":e[1]||(e[1]=l=>F.value=l),items:J.value,label:"Фильтр по категории","prepend-inner-icon":"mdi-filter",clearable:"","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),t(ye,{headers:h.value,items:ee.value,"items-per-page":10,loading:N.value,class:"elevation-1"},{"item.questions":o(({item:l})=>[s(v(l.raw.questions.length)+" вопросов ",1)]),"item.timeLimit":o(({item:l})=>[s(v(l.raw.timeLimit)+" мин. ",1)]),"item.status":o(({item:l})=>[t(W,{color:l.raw.isActive?"success":"error",size:"small"},{default:o(()=>[s(v(l.raw.isActive?"Активен":"Неактивен"),1)]),_:2},1032,["color"])]),"item.actions":o(({item:l})=>[t(d,{icon:"",variant:"text",size:"small",onClick:u=>pe(l.raw)},{default:o(()=>[t(y,null,{default:o(()=>e[25]||(e[25]=[s("mdi-eye")])),_:1})]),_:2},1032,["onClick"]),t(d,{icon:"",variant:"text",size:"small",onClick:u=>X(l.raw)},{default:o(()=>[t(y,null,{default:o(()=>e[26]||(e[26]=[s("mdi-pencil")])),_:1})]),_:2},1032,["onClick"]),t(d,{icon:"",variant:"text",size:"small",color:"error",onClick:u=>ve(l.raw)},{default:o(()=>[t(y,null,{default:o(()=>e[27]||(e[27]=[s("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:1},8,["headers","items","loading"])]),_:1}),t(B,{modelValue:L.value,"onUpdate:modelValue":e[9]||(e[9]=l=>L.value=l),"max-width":"800",scrollable:"",persistent:""},{default:o(()=>[t(z,null,{default:o(()=>[t(O,null,{default:o(()=>e[28]||(e[28]=[s("Создать новый тест")])),_:1}),t(D,null,{default:o(()=>[t(I,{ref:"addForm",modelValue:R.value,"onUpdate:modelValue":e[7]||(e[7]=l=>R.value=l)},{default:o(()=>[t(x,{modelValue:n.value.title,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value.title=l),label:"Название теста",required:"",rules:[l=>!!l||"Название обязательно"]},null,8,["modelValue","rules"]),t(x,{modelValue:n.value.description,"onUpdate:modelValue":e[3]||(e[3]=l=>n.value.description=l),label:"Описание",required:"",rules:[l=>!!l||"Описание обязательно"]},null,8,["modelValue","rules"]),t(K,{modelValue:n.value.category,"onUpdate:modelValue":e[4]||(e[4]=l=>n.value.category=l),items:J.value,label:"Категория",required:"",rules:[l=>!!l||"Категория обязательна"]},null,8,["modelValue","items","rules"]),t(x,{modelValue:n.value.timeLimit,"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.timeLimit=l),modelModifiers:{number:!0},label:"Ограничение по времени (минуты)",type:"number",required:"",rules:[l=>!!l||"Ограничение по времени обязательно",l=>l>0||"Должно быть больше 0"]},null,8,["modelValue","rules"]),t(M,{modelValue:n.value.isActive,"onUpdate:modelValue":e[6]||(e[6]=l=>n.value.isActive=l),label:"Активен"},null,8,["modelValue"]),t(G,{class:"my-4"}),e[34]||(e[34]=m("h3",{class:"text-h6 mb-3"},"Вопросы",-1)),(V(!0),b(U,null,w(n.value.questions,(l,u)=>(V(),b("div",{key:u,class:"mb-6 pa-4 rounded-lg",style:{border:"1px solid rgba(0,0,0,0.12)"}},[m("div",qe,[m("h4",Le,"Вопрос "+v(u+1),1),t(C),t(d,{icon:"",size:"small",color:"error",variant:"text",onClick:i=>ae(u)},{default:o(()=>[t(y,null,{default:o(()=>e[29]||(e[29]=[s("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),t(x,{modelValue:l.text,"onUpdate:modelValue":i=>l.text=i,label:"Текст вопроса",required:"",rules:[i=>!!i||"Текст вопроса обязателен"]},null,8,["modelValue","onUpdate:modelValue","rules"]),e[32]||(e[32]=m("h5",{class:"text-subtitle-2 mb-2 mt-4"},"Варианты ответов",-1)),(V(!0),b(U,null,w(l.options,(i,g)=>(V(),b("div",{key:g,class:"d-flex align-center mb-2"},[t(M,{modelValue:i.correct,"onUpdate:modelValue":f=>i.correct=f,label:"",class:"mr-2",color:"success"},null,8,["modelValue","onUpdate:modelValue"]),t(x,{modelValue:i.text,"onUpdate:modelValue":f=>i.text=f,label:"Вариант ответа",required:"","hide-details":"",rules:[f=>!!f||"Текст варианта обязателен"],class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","rules"]),t(d,{icon:"",size:"small",color:"error",variant:"text",class:"ml-2",onClick:f=>ie(u,g),disabled:l.options.length<=2},{default:o(()=>[t(y,null,{default:o(()=>e[30]||(e[30]=[s("mdi-delete")])),_:1})]),_:2},1032,["onClick","disabled"])]))),128)),t(d,{color:"primary",variant:"text","prepend-icon":"mdi-plus",class:"mt-2",onClick:i=>se(u)},{default:o(()=>e[31]||(e[31]=[s(" Добавить вариант ")])),_:2},1032,["onClick"])]))),128)),t(d,{color:"primary",variant:"outlined",block:"","prepend-icon":"mdi-plus",class:"mt-4",onClick:P},{default:o(()=>e[33]||(e[33]=[s(" Добавить вопрос ")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(Q,null,{default:o(()=>[t(C),t(d,{color:"secondary",onClick:e[8]||(e[8]=l=>L.value=!1)},{default:o(()=>e[35]||(e[35]=[s("Отмена")])),_:1}),t(d,{color:"primary",onClick:ue,disabled:!R.value||!le.value},{default:o(()=>e[36]||(e[36]=[s("Создать")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:T.value,"onUpdate:modelValue":e[17]||(e[17]=l=>T.value=l),"max-width":"800",scrollable:"",persistent:""},{default:o(()=>[t(z,null,{default:o(()=>[t(O,null,{default:o(()=>e[37]||(e[37]=[s("Редактировать тест")])),_:1}),t(D,null,{default:o(()=>[t(I,{ref:"editForm",modelValue:j.value,"onUpdate:modelValue":e[15]||(e[15]=l=>j.value=l)},{default:o(()=>[t(x,{modelValue:r.value.title,"onUpdate:modelValue":e[10]||(e[10]=l=>r.value.title=l),label:"Название теста",required:"",rules:[l=>!!l||"Название обязательно"]},null,8,["modelValue","rules"]),t(x,{modelValue:r.value.description,"onUpdate:modelValue":e[11]||(e[11]=l=>r.value.description=l),label:"Описание",required:"",rules:[l=>!!l||"Описание обязательно"]},null,8,["modelValue","rules"]),t(K,{modelValue:r.value.category,"onUpdate:modelValue":e[12]||(e[12]=l=>r.value.category=l),items:J.value,label:"Категория",required:"",rules:[l=>!!l||"Категория обязательна"]},null,8,["modelValue","items","rules"]),t(x,{modelValue:r.value.timeLimit,"onUpdate:modelValue":e[13]||(e[13]=l=>r.value.timeLimit=l),modelModifiers:{number:!0},label:"Ограничение по времени (минуты)",type:"number",required:"",rules:[l=>!!l||"Ограничение по времени обязательно",l=>l>0||"Должно быть больше 0"]},null,8,["modelValue","rules"]),t(M,{modelValue:r.value.isActive,"onUpdate:modelValue":e[14]||(e[14]=l=>r.value.isActive=l),label:"Активен"},null,8,["modelValue"]),t(G,{class:"my-4"}),e[43]||(e[43]=m("h3",{class:"text-h6 mb-3"},"Вопросы",-1)),(V(!0),b(U,null,w(r.value.questions,(l,u)=>(V(),b("div",{key:u,class:"mb-6 pa-4 rounded-lg",style:{border:"1px solid rgba(0,0,0,0.12)"}},[m("div",Te,[m("h4",Ae,"Вопрос "+v(u+1),1),t(C),t(d,{icon:"",size:"small",color:"error",variant:"text",onClick:i=>de(u)},{default:o(()=>[t(y,null,{default:o(()=>e[38]||(e[38]=[s("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),t(x,{modelValue:l.text,"onUpdate:modelValue":i=>l.text=i,label:"Текст вопроса",required:"",rules:[i=>!!i||"Текст вопроса обязателен"]},null,8,["modelValue","onUpdate:modelValue","rules"]),e[41]||(e[41]=m("h5",{class:"text-subtitle-2 mb-2 mt-4"},"Варианты ответов",-1)),(V(!0),b(U,null,w(l.options,(i,g)=>(V(),b("div",{key:g,class:"d-flex align-center mb-2"},[t(M,{modelValue:i.correct,"onUpdate:modelValue":f=>i.correct=f,label:"",class:"mr-2",color:"success"},null,8,["modelValue","onUpdate:modelValue"]),t(x,{modelValue:i.text,"onUpdate:modelValue":f=>i.text=f,label:"Вариант ответа",required:"","hide-details":"",rules:[f=>!!f||"Текст варианта обязателен"],class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","rules"]),t(d,{icon:"",size:"small",color:"error",variant:"text",class:"ml-2",onClick:f=>me(u,g),disabled:l.options.length<=2},{default:o(()=>[t(y,null,{default:o(()=>e[39]||(e[39]=[s("mdi-delete")])),_:1})]),_:2},1032,["onClick","disabled"])]))),128)),t(d,{color:"primary",variant:"text","prepend-icon":"mdi-plus",class:"mt-2",onClick:i=>ne(u)},{default:o(()=>e[40]||(e[40]=[s(" Добавить вариант ")])),_:2},1032,["onClick"])]))),128)),t(d,{color:"primary",variant:"outlined",block:"","prepend-icon":"mdi-plus",class:"mt-4",onClick:re},{default:o(()=>e[42]||(e[42]=[s(" Добавить вопрос ")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(Q,null,{default:o(()=>[t(C),t(d,{color:"secondary",onClick:e[16]||(e[16]=l=>T.value=!1)},{default:o(()=>e[44]||(e[44]=[s("Отмена")])),_:1}),t(d,{color:"primary",onClick:fe,disabled:!j.value||!te.value},{default:o(()=>e[45]||(e[45]=[s("Сохранить")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:A.value,"onUpdate:modelValue":e[20]||(e[20]=l=>A.value=l),"max-width":"800",scrollable:""},{default:o(()=>[t(z,null,{default:o(()=>[t(O,null,{default:o(()=>{var l;return[s(v((l=c.value)==null?void 0:l.title),1)]}),_:1}),t(be,null,{default:o(()=>{var l;return[t(W,{color:"primary",size:"small",class:"mr-2"},{default:o(()=>{var u;return[s(v((u=c.value)==null?void 0:u.category),1)]}),_:1}),t(W,{color:(l=c.value)!=null&&l.isActive?"success":"error",size:"small"},{default:o(()=>{var u;return[s(v((u=c.value)!=null&&u.isActive?"Активен":"Неактивен"),1)]}),_:1},8,["color"])]}),_:1}),t(D,null,{default:o(()=>{var l,u,i,g;return[m("p",$e,v((l=c.value)==null?void 0:l.description),1),m("div",ze,[m("div",null,[t(y,{color:"info",class:"mr-1"},{default:o(()=>e[46]||(e[46]=[s("mdi-clock-outline")])),_:1}),m("span",null,v((u=c.value)==null?void 0:u.timeLimit)+" минут",1)]),m("div",null,[t(y,{color:"info",class:"mr-1"},{default:o(()=>e[47]||(e[47]=[s("mdi-help-circle-outline")])),_:1}),m("span",null,v((i=c.value)==null?void 0:i.questions.length)+" вопросов",1)])]),t(G,{class:"mb-4"}),(V(!0),b(U,null,w((g=c.value)==null?void 0:g.questions,(f,Y)=>(V(),b("div",{key:Y,class:"mb-6"},[m("h3",De,"Вопрос "+v(Y+1),1),m("p",Fe,v(f.text),1),t(ge,{class:"bg-grey-lighten-4 rounded-lg"},{default:o(()=>[(V(!0),b(U,null,w(f.options,(S,Ve)=>(V(),_(ke,{key:Ve,"prepend-icon":S.correct?"mdi-check-circle":"mdi-circle-outline","prepend-icon-color":S.correct?"success":"grey"},{default:o(()=>[t(Ce,{class:we({"font-weight-bold":S.correct})},{default:o(()=>[s(v(S.text),1)]),_:2},1032,["class"])]),_:2},1032,["prepend-icon","prepend-icon-color"]))),128))]),_:2},1024)]))),128))]}),_:1}),t(Q,null,{default:o(()=>[t(C),t(d,{color:"primary",onClick:e[18]||(e[18]=l=>A.value=!1)},{default:o(()=>e[48]||(e[48]=[s("Закрыть")])),_:1}),t(d,{color:"secondary",onClick:e[19]||(e[19]=l=>X(c.value))},{default:o(()=>e[49]||(e[49]=[s("Редактировать")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:$.value,"onUpdate:modelValue":e[22]||(e[22]=l=>$.value=l),"max-width":"400"},{default:o(()=>[t(z,null,{default:o(()=>[t(O,null,{default:o(()=>e[50]||(e[50]=[s("Подтверждение удаления")])),_:1}),t(D,null,{default:o(()=>{var l;return[s(' Вы действительно хотите удалить тест "'+v((l=c.value)==null?void 0:l.title)+'"? ',1)]}),_:1}),t(Q,null,{default:o(()=>[t(C),t(d,{color:"secondary",onClick:e[21]||(e[21]=l=>$.value=!1)},{default:o(()=>e[51]||(e[51]=[s("Отмена")])),_:1}),t(d,{color:"error",onClick:ce},{default:o(()=>e[52]||(e[52]=[s("Удалить")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{ul as default};
