import{Q as k,d as r,x as w,K as C,L as S,M as l,m as a,O as m,Z as U,u as T,S as p,T as B}from"./vue-vendor-B4qzxTjV.js";import{c as I,d as M,e as j,f as A}from"./index-CIpMSW_s.js";import{V as N,a as q,b as D,c as F}from"./VCard-BaakkVFD.js";import{V as R}from"./VForm-D0rJnxSg.js";import{V as x}from"./VTextField-BhM9EnZB.js";import{V as $}from"./VCheckbox-BrkgBynp.js";import{V}from"./VBtn-B-hdhH-1.js";import{V as z}from"./VDivider-Drx-iRHJ.js";import{V as K}from"./VSnackbar-X6915U30.js";import"./vuetify-vendor-BD37EBPT.js";import"./VAvatar-C-ER2-0S.js";import"./VInput-Bp3p24Ap.js";import"./index-yNQZhi3p.js";import"./forwardRefs-C-GTDzx5.js";import"./VField-BmVeynRq.js";import"./VCheckboxBtn-CvAPjEFh.js";import"./VSelectionControl-b5nrjLPm.js";import"./VOverlay-BXO8EOEs.js";import"./lazy-UP9naqc7.js";const L={class:"mb-4 d-flex justify-space-between align-center"},ne={__name:"login",setup(O){const b=k(),n=I(),g=r(null),o=r(""),f=r(""),u=r(!1),i=r(!1),s=r(!1),v=r(""),c=r("error");w(()=>{const d=localStorage.getItem("rememberedUser");d&&(o.value=d,i.value=!0),n.isAuthenticated&&b.push("/dashboard")});const y=async()=>{if(!g.value.validate())return;(await n.login({username:o.value,password:f.value})).success?(i.value?localStorage.setItem("rememberedUser",o.value):localStorage.removeItem("rememberedUser"),c.value="success",v.value="Вы успешно вошли в систему",s.value=!0,setTimeout(()=>{b.push("/dashboard")},1e3)):(c.value="error",v.value=n.error||"Ошибка при входе в систему",s.value=!0)};return(d,e)=>(S(),C(A,{fluid:"",class:"fill-height bg-secondary-subtle"},{default:l(()=>[a(M,{justify:"center",align:"center"},{default:l(()=>[a(j,{cols:"12",sm:"8",md:"4",lg:"3"},{default:l(()=>[a(N,{class:"elevation-5 rounded-lg"},{default:l(()=>[a(q,{class:"text-center pt-6 pb-2"},{default:l(()=>e[6]||(e[6]=[m("h4",{class:"text-h4 font-weight-bold"},"Вход в систему",-1)])),_:1}),a(D,null,{default:l(()=>[a(R,{ref_key:"form",ref:g,onSubmit:U(y,["prevent"])},{default:l(()=>[a(x,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),label:"Имя пользователя",placeholder:"Введите имя пользователя","prepend-inner-icon":"mdi-account",rules:[t=>!!t||"Имя пользователя обязательно"],required:"",variant:"outlined",class:"mb-4"},null,8,["modelValue","rules"]),a(x,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t),label:"Пароль",placeholder:"Введите пароль","prepend-inner-icon":"mdi-lock","append-inner-icon":u.value?"mdi-eye-off":"mdi-eye",type:u.value?"text":"password","onClick:appendInner":e[2]||(e[2]=t=>u.value=!u.value),rules:[t=>!!t||"Пароль обязателен"],required:"",variant:"outlined",class:"mb-4"},null,8,["modelValue","append-inner-icon","type","rules"]),m("div",L,[a($,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),label:"Запомнить меня",color:"primary",density:"compact"},null,8,["modelValue"]),e[7]||(e[7]=m("a",{href:"#",class:"text-secondary text-decoration-none"},"Забыли пароль?",-1))]),a(V,{color:"primary",block:"",size:"large",type:"submit",loading:T(n).loading,class:"mb-4"},{default:l(()=>e[8]||(e[8]=[p(" Войти ")])),_:1},8,["loading"])]),_:1},512)]),_:1}),a(z),a(F,{class:"pa-4 justify-center"},{default:l(()=>[e[10]||(e[10]=m("span",{class:"text-medium-emphasis"},"Нет аккаунта?",-1)),a(V,{variant:"text",color:"primary",to:"/register"},{default:l(()=>e[9]||(e[9]=[p(" Зарегистрироваться ")])),_:1})]),_:1}),a(K,{modelValue:s.value,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value=t),color:c.value,timeout:"3000"},{actions:l(()=>[a(V,{variant:"text",onClick:e[4]||(e[4]=t=>s.value=!1)},{default:l(()=>e[11]||(e[11]=[p("Закрыть")])),_:1})]),default:l(()=>[p(B(v.value)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ne as default};
