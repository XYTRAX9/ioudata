import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as Y,a as Z,m as tt,b as et,d as E,e as k,g as F,f as st}from"./index-CIpMSW_s.js";import{V as g,a as R,d as at,b as w,c as N}from"./VCard-BaakkVFD.js";import{u as lt,a as ot,j as rt,p as it,b as nt,m as ut,q as dt,l as ct,c as mt,d as ft,h as I,f as d}from"./VAvatar-C-ER2-0S.js";import{V as p}from"./VDivider-Drx-iRHJ.js";import{V as T}from"./VBtn-B-hdhH-1.js";import{V as G,a as O,b as vt,c as gt}from"./VList-zMJOwsiP.js";import{V as U}from"./VChip-pvFqXEpf.js";import{u as pt,V as $,b as _t}from"./VOverlay-BXO8EOEs.js";import{f as xt}from"./forwardRefs-C-GTDzx5.js";import{g as W,p as J,a as yt,b as Q,m as bt,e as Vt,x as kt,O as wt}from"./vuetify-vendor-BD37EBPT.js";import{E as Ct,m as t,y as Pt,c as C,d as P,n as j,f as q,x as ht,K as z,L as _,M as e,S as l,T as n,O as r,R as H,F as K,U as Mt}from"./vue-vendor-B4qzxTjV.js";import"./index-yNQZhi3p.js";import"./lazy-UP9naqc7.js";const St=J({color:String,...ft(),...Vt(),...et(),...mt(),...ct(),...dt(),...ut(),...tt(),...bt()},"VSheet"),Dt=W()({name:"VSheet",props:St(),setup(a,h){let{slots:c}=h;const{themeClasses:i}=yt(a),{backgroundColorClasses:m,backgroundColorStyles:v}=Y(Ct(a,"color")),{borderClasses:f}=lt(a),{dimensionStyles:x}=Z(a),{elevationClasses:M}=ot(a),{locationStyles:S}=rt(a),{positionClasses:y}=it(a),{roundedClasses:D}=nt(a);return Q(()=>t(a.tag,{class:["v-sheet",i.value,m.value,f.value,M.value,y.value,D.value,a.class],style:[v.value,x.value,S.value,a.style]},c)),{}}}),Tt=J({id:String,interactive:Boolean,text:String,...wt(_t({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),zt=W()({name:"VTooltip",props:Tt(),emits:{"update:modelValue":a=>!0},setup(a,h){let{slots:c}=h;const i=kt(a,"modelValue"),{scopeId:m}=pt(),v=Pt(),f=C(()=>a.id||`v-tooltip-${v}`),x=P(),M=C(()=>a.location.split(" ").length>1?a.location:a.location+" center"),S=C(()=>a.origin==="auto"||a.origin==="overlap"||a.origin.split(" ").length>1||a.location.split(" ").length>1?a.origin:a.origin+" center"),y=C(()=>a.transition?a.transition:i.value?"scale-transition":"fade-transition"),D=C(()=>j({"aria-describedby":f.value},a.activatorProps));return Q(()=>{const A=$.filterProps(a);return t($,j({ref:x,class:["v-tooltip",{"v-tooltip--interactive":a.interactive},a.class],style:a.style,id:f.value},A,{modelValue:i.value,"onUpdate:modelValue":b=>i.value=b,transition:y.value,absolute:!0,location:M.value,origin:S.value,persistent:!0,role:"tooltip",activatorProps:D.value,_disableGlobalStack:!0},m),{activator:c.activator,default:function(){var B;for(var b=arguments.length,L=new Array(b),V=0;V<b;V++)L[V]=arguments[V];return((B=c.default)==null?void 0:B.call(c,...L))??a.text}})}),xt({},x)}}),Lt={class:"text-h5"},Bt={class:"text-h5"},Rt={class:"text-h5"},It={class:"text-center mb-4"},Ot={class:"text-h4"},At={class:"text-subtitle-1 mt-4"},Et={__name:"dashboard",setup(a){const h=q("employees"),c=q("communications"),i=P({id:0,name:"Сотрудник",email:"",group:"normal",stress_level:1,is_superuser:!1}),m=P({communications:0,clients:0,tests:0}),v=P([]),f=P(!0),x=P(y(new Date)),M=C(()=>i.value.is_superuser?"Администратор":"Сотрудник"),S=async()=>{f.value=!0;try{const o=await h.getProfile();i.value=o.data;const s=await c.getList({limit:5});v.value=s.data,m.value={communications:Math.floor(Math.random()*100),clients:Math.floor(Math.random()*50),tests:Math.floor(Math.random()*20)}}catch(o){console.error("Ошибка загрузки данных дашборда:",o)}finally{f.value=!1}};function y(o){return(o instanceof Date?o:new Date(o)).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function D(o){return{completed:"success",in_progress:"info",scheduled:"primary",canceled:"error",pending:"warning"}[o]||"grey"}function A(o){return{completed:"mdi-check-circle",in_progress:"mdi-progress-clock",scheduled:"mdi-calendar-clock",canceled:"mdi-cancel",pending:"mdi-clock-outline"}[o]||"mdi-help-circle"}function b(o){return{1:"success",2:"light-green",3:"warning",4:"orange",5:"error"}[o]||"grey"}function L(o){return{1:"Нормальный уровень стресса",2:"Незначительный стресс",3:"Средний уровень стресса",4:"Повышенный уровень стресса",5:"Критический уровень стресса"}[o]||"Неизвестный уровень стресса"}function V(o){return{normal:"Норма",slightly_below:"Чуть ниже нормы",significantly_below:"Значительно ниже нормы"}[o]||"Неизвестная группа"}function B(o){return{normal:"success",slightly_below:"warning",significantly_below:"error"}[o]||"grey"}return ht(()=>{S()}),(o,s)=>(_(),z(st,{fluid:""},{default:e(()=>[t(E,{class:"mb-4"},{default:e(()=>[t(k,{cols:"12"},{default:e(()=>[t(g,{class:"px-4 py-2"},{default:e(()=>[t(R,{class:"text-h5"},{default:e(()=>[l(" Добро пожаловать, "+n(i.value.name)+"! ",1)]),_:1}),t(at,null,{default:e(()=>[l(n(M.value)+" | Последний вход: "+n(x.value),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(E,null,{default:e(()=>[t(k,{cols:"12",md:"4"},{default:e(()=>[t(g,{class:"dashboard-card"},{default:e(()=>[t(w,{class:"d-flex align-center"},{default:e(()=>[t(I,{size:"50",color:"primary",class:"mr-4"},{default:e(()=>[t(d,{size:"x-large",color:"white"},{default:e(()=>s[0]||(s[0]=[l("mdi-briefcase-variant")])),_:1})]),_:1}),r("div",null,[s[1]||(s[1]=r("div",{class:"text-overline mb-1"},"Коммуникаций",-1)),r("div",Lt,n(m.value.communications),1)])]),_:1}),t(p),t(N,null,{default:e(()=>[t(T,{variant:"text",to:"/communications"},{default:e(()=>[s[3]||(s[3]=l(" Просмотреть все ")),t(d,{right:""},{default:e(()=>s[2]||(s[2]=[l("mdi-arrow-right")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(k,{cols:"12",md:"4"},{default:e(()=>[t(g,{class:"dashboard-card"},{default:e(()=>[t(w,{class:"d-flex align-center"},{default:e(()=>[t(I,{size:"50",color:"success",class:"mr-4"},{default:e(()=>[t(d,{size:"x-large",color:"white"},{default:e(()=>s[4]||(s[4]=[l("mdi-account-group")])),_:1})]),_:1}),r("div",null,[s[5]||(s[5]=r("div",{class:"text-overline mb-1"},"Клиентов",-1)),r("div",Bt,n(m.value.clients),1)])]),_:1}),t(p),t(N,null,{default:e(()=>[t(T,{variant:"text",to:"/clients"},{default:e(()=>[s[7]||(s[7]=l(" Просмотреть всех ")),t(d,{right:""},{default:e(()=>s[6]||(s[6]=[l("mdi-arrow-right")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(k,{cols:"12",md:"4"},{default:e(()=>[t(g,{class:"dashboard-card"},{default:e(()=>[t(w,{class:"d-flex align-center"},{default:e(()=>[t(I,{size:"50",color:"warning",class:"mr-4"},{default:e(()=>[t(d,{size:"x-large",color:"white"},{default:e(()=>s[8]||(s[8]=[l("mdi-clipboard-text")])),_:1})]),_:1}),r("div",null,[s[9]||(s[9]=r("div",{class:"text-overline mb-1"},"Тестов",-1)),r("div",Rt,n(m.value.tests),1)])]),_:1}),t(p),t(N,null,{default:e(()=>[t(T,{variant:"text",to:"/tests"},{default:e(()=>[s[11]||(s[11]=l(" Посмотреть тесты ")),t(d,{right:""},{default:e(()=>s[10]||(s[10]=[l("mdi-arrow-right")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(E,{class:"mt-4"},{default:e(()=>[t(k,{cols:"12",md:"8"},{default:e(()=>[t(g,null,{default:e(()=>[t(R,{class:"d-flex justify-space-between align-center"},{default:e(()=>[s[13]||(s[13]=r("span",null,"Недавние коммуникации",-1)),t(T,{variant:"text",color:"primary",to:"/communications"},{default:e(()=>s[12]||(s[12]=[l("Все")])),_:1})]),_:1}),t(p),f.value?(_(),z(w,{key:0,class:"text-center py-4"},{default:e(()=>[t(F,{indeterminate:"",color:"primary"}),s[14]||(s[14]=r("div",{class:"mt-2"},"Загрузка данных...",-1))]),_:1})):(_(),H(K,{key:1},[v.value.length>0?(_(),z(G,{key:0},{default:e(()=>[(_(!0),H(K,null,Mt(v.value,u=>(_(),z(O,{key:u.id,to:`/communications/${u.id}`},{prepend:e(()=>[t(I,{size:"40",color:D(u.status),class:"mr-3"},{default:e(()=>[t(d,{color:"white"},{default:e(()=>[l(n(A(u.status)),1)]),_:2},1024)]),_:2},1032,["color"])]),append:e(()=>[t(U,{color:u.success_rate>=70?"success":u.success_rate>=40?"warning":"error",size:"small",class:"ms-2"},{default:e(()=>[l(n(u.success_rate||0)+"% ",1)]),_:2},1032,["color"])]),default:e(()=>[t(vt,null,{default:e(()=>[l(n(u.client_name||"Клиент #"+u.client_id),1)]),_:2},1024),t(gt,null,{default:e(()=>[l(n(y(u.timestamp))+" • "+n(u.call_type)+" • "+n(u.status),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})):(_(),z(w,{key:1,class:"text-center py-4"},{default:e(()=>[t(d,{size:"large",color:"grey"},{default:e(()=>s[15]||(s[15]=[l("mdi-message-outline")])),_:1}),s[16]||(s[16]=r("div",{class:"mt-2 text-medium-emphasis"},"Нет недавних коммуникаций",-1))]),_:1}))],64))]),_:1})]),_:1}),t(k,{cols:"12",md:"4"},{default:e(()=>[t(g,null,{default:e(()=>[t(R,null,{default:e(()=>[s[18]||(s[18]=l(" Уровень стресса ")),t(zt,{location:"top",text:"Показывает ваш текущий уровень стресса"},{activator:e(({props:u})=>[t(d,j({class:"ms-2",size:"small"},u),{default:e(()=>s[17]||(s[17]=[l("mdi-help-circle-outline")])),_:2},1040)]),_:1})]),_:1}),t(p),t(w,{class:"pt-4"},{default:e(()=>[r("div",It,[t(Dt,{class:"mx-auto","max-width":"300"},{default:e(()=>[t(F,{"model-value":i.value.stress_level*20,color:b(i.value.stress_level),size:"150",width:"15"},{default:e(()=>[r("div",Ot,n(i.value.stress_level)+"/5",1)]),_:1},8,["model-value","color"])]),_:1}),r("div",At,n(L(i.value.stress_level)),1)]),t(p,{class:"mb-4"}),s[20]||(s[20]=r("div",{class:"text-subtitle-1 font-weight-bold mb-2"},"Группа сотрудника",-1)),t(U,{color:B(i.value.group),class:"mb-4"},{default:e(()=>[l(n(V(i.value.group)),1)]),_:1},8,["color"]),s[21]||(s[21]=r("div",{class:"text-body-2"}," Рекомендуется регулярно проходить тесты для контроля уровня стресса и поддержания эффективности работы. ",-1)),t(T,{color:"primary",variant:"text",class:"mt-4",to:"/tests",block:""},{default:e(()=>s[19]||(s[19]=[l(" Пройти тест ")])),_:1})]),_:1})]),_:1}),t(g,{class:"mt-4"},{default:e(()=>[t(R,null,{default:e(()=>s[22]||(s[22]=[l("Быстрые действия")])),_:1}),t(p),t(G,null,{default:e(()=>[t(O,{"prepend-icon":"mdi-account",title:"Профиль",to:"/profile"}),t(O,{"prepend-icon":"mdi-message-text",title:"Перейти к чату",to:"/chat"}),t(O,{"prepend-icon":"mdi-clipboard-text",title:"Пройти тест",to:"/tests"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Zt=X(Et,[["__scopeId","data-v-836e79f2"]]);export{Zt as default};
